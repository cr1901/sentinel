[options]
isa rv32i

[groups]
# Shift insns make a true full formal test take a long time (10+ mins just
# to check assumptions), probably for little gain. Neverless, allow the
# possibility for running long tests.
full

[depth]
insn            20
full_insn_slli       80
full_insn_srli       80
full_insn_srai       80
full_insn_sll        80
full_insn_srl        80
full_insn_sra        80
reg       15    25
pc_fwd    10    30
pc_bwd    10    30
liveness  1  12 39
full_liveness 1  12 150
unique    1  10 30
causal    10    30
cover     1     30

csrw            20
csrc_any  1     20

[csrs]
mscratch any
mcause

[defines]
`define RISCV_FORMAL_ALIGNED_MEM

[defines liveness]
`define MEMIO_FAIRNESS

[defines full_liveness]
`define MEMIO_FAIRNESS
`define NO_SHIFT_FAIRNESS

[verilog-files]
@basedir@/cores/@core@/wrapper.sv
@basedir@/cores/@core@/@core@.v

[cover]
// Create a trace which executes 5 insns.
always @* if (!reset) cover (channel[0].cnt_insns == 5);
// Get an idea of how many clocks required to meaningfully write MSCRATCH.
always @* if (!reset) cover (rvfi_valid
                             && rvfi_csr_mscratch_rdata == 32'hFEEDCAFE);
// Generate a trace with an MRET preceded by IRQ.
always @* if (!reset) cover (rvfi_valid &&
                             rvfi_csr_mcause_rdata[31] == 1 &&
                             rvfi_insn == 32'b00110000001000000000000001110011);
`ifdef 0
// Create a trace which demonstrates trapping.
reg rvfi_trap_prev = 0;
always @(posedge clock) if (rvfi_valid) rvfi_trap_prev <= rvfi_trap;
always @* if (!reset) cover (channel[0].cnt_insns == 5 && rvfi_valid && rvfi_trap_prev);
`endif
