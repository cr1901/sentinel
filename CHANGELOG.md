# Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [Unreleased]


## [v0.1.0-alpha] - 2023-11-29

Initial release. This is a retroactive release, created just before the
`next`/`main` split.

[PDM](https://pdm-project.org) should be used for interacting with this repo;
type `pdm run --list` for a list of commands. `pdm` will defer to [DoIt](https://pydoit.org/)
for complex tasks such as orchestrating [RISC-V Formal](https://github.com/YosysHQ/riscv-formal).

[Pytest](https://pytest.org) is used for basic testing, and [Flake8](https://flake8.pycqa.org)
is used for linting. Due to code cleanups required, as well as some tooling
still being in flux, _no documentation beyond the CHANGELOG.md and README.md
is provided yet._

**Due to git dependencies, this release is only usable within the `pdm`
environment**. Specifically, the SoC example, tests, and Verilog generation
works, but using Sentinel as a dependency of another Python/Amaranth/`pdm`
project _does not work_.

### Added
- Working SoC example for [Lattice IceStick](https://www.latticesemi.com/icestick)
  and [iCE40-HX8K Breakout Board](https://www.latticesemi.com/Products/DevelopmentBoardsAndKits/iCE40HX8KBreakoutBoard.aspx).
  - Includes custom [Amaranth](https://amaranth-lang.org/) peripherals and a contrived
    [Rust](https://www.rust-lang.org/) firmware.
    
    Run using `pdm demo` (Assembly firmware) or `pdm demo-rust` (Rust firmware).
  - Demo is using [special options](https://libera.irclog.whitequark.org/yosys/2023-11-20#1700497858-1700497760)
    to [yosys](https://yosyshq.net/yosys/) to make Sentinel fit onto IceStick.
  - Microcode written using the [m5meta](https://github.com/brouhaha/m5meta/)
    microcode assembler, version 1.x.
    - An upcoming version 2.x of `m5meta` is expected in the moderate-near
      future. I plan to rewrite the microcode then, and _the rewrite will not
      be compatible with version 1.x._
- Working RISC-V soft-core implementing the [RV32I_Zcsr specification](https://github.com/riscv/riscv-isa-manual/releases/tag/Ratified-IMAFDQC).
  - Core passes the RISC-V Formal verification tests, as well as the [tests](https://github.com/riscv-non-isa/riscv-arch-test)
    used by RISC-V International as part of the [RISCOF framework](https://github.com/riscv-software-src/riscof).
- Bespoke test suite with my own custom tests and [pytest](https://pytest.org)
  fixtures for simulating Sentinel with [Amaranth's
  Python simulator.
  - Many of the pytest test come from an [older test suite](https://github.com/riscv-software-src/riscv-tests)
    no-longer used by RISC-V International. I feel they are fine as a first
    layer of tests to detect immediate breakage of Sentinel.
- CI using [Github Actions](https://github.com/cr1901/sentinel/actions) tests
  using pytest, RISC-V Formal, RISCOF, and demo synthesis every push and PR.
  - The demo test is allowed to fail due to lack of space on Icestick due to
    different compilers optimizing `yosys` slightly differently. See
    [#2](https://github.com/cr1901/sentinel/issues/2).
- A nice logo by [Tokino Kei](https://tokinokei.carrd.co/) :).


[Unreleased]: https://github.com/cr1901/sentinel/compare/v0.1.0-alpha..HEAD
[v0.1.0-alpha]: https://github.com/cr1901/sentinel/releases/tag/v0.1.0-alpha

<!-- Skeleton generated by git-cliff. Maintained by hand. -->
